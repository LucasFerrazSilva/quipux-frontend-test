<div class="breadcrumb">
    <a mat-button color="primary" routerLink="/">Playlists</a> / <a mat-button disabled>Adicionar Playlist</a>
</div>


<mat-card class="main-card">
    <mat-card-title>Adicionar Playlist</mat-card-title>
    <mat-card-content>

        <div class="errors" *ngIf="errors.length > 0">
            <div *ngFor="let error of errors"><strong>{{error.field}}</strong>: {{error.message}}</div>
        </div>
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div>                
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Nome</mat-label>
                    <input matInput formControlName="nome">
                </mat-form-field>
            </div>
            <div> 
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Descrição</mat-label>
                    <textarea matInput formControlName="descricao"></textarea>
                </mat-form-field>
            </div>
            <h4>Músicas</h4>
            <div class="musicas" formArrayName="musicas">
                <ng-container *ngFor="let musicaForm of musicasFormArrayControls; let i=index;">
                    <div class="musica" [formGroup]="musicaForm">   
                        <mat-form-field appearance="outline">
                            <mat-label>Titulo</mat-label>
                            <input matInput formControlName="titulo">
                        </mat-form-field>   
                        <mat-form-field appearance="outline">
                            <mat-label>Artista</mat-label>
                            <input matInput formControlName="artista">
                        </mat-form-field>  
                        <mat-form-field appearance="outline">
                            <mat-label>Album</mat-label>
                            <input matInput formControlName="album">
                        </mat-form-field>  
                        <mat-form-field appearance="outline">
                            <mat-label>Ano</mat-label>
                            <input matInput formControlName="ano">
                        </mat-form-field>                       
                        <mat-form-field appearance="outline">
                            <mat-label>Genero</mat-label>
                            <input matInput formControlName="genero">
                        </mat-form-field>
                        <button class="remove-musica-button" type="button" color="warn" mat-mini-fab (click)="deleteMusica(i)">
                            <mat-icon>remove</mat-icon>
                        </button>
                    </div>
                </ng-container>
                <button class="add-musica-button" type="button" color="accent" mat-mini-fab (click)="addMusica()">
                    <mat-icon>add</mat-icon>
                </button>
            </div>

            <button mat-flat-button class="button submit-form-button" color="primary" type="submit" [disabled]="form.invalid">Adicionar</button>
        </form>
    </mat-card-content>
</mat-card>